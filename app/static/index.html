<!DOCTYPE html>
<html>
    <head>
        <title>SFpark</title>

        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link rel="shortcut icon" href="./favicon.ico">
        
        <!-- Ext resources -->
        <link rel="stylesheet" type="text/css" href="externals/ext/resources/css/ext-all.css" />
        <link rel="stylesheet" type="text/css" href="externals/ext/resources/css/xtheme-gray.css" />
        <script type="text/javascript" src="externals/ext/adapter/ext/ext-base.js"></script>
        <script type="text/javascript" src="externals/ext/ext-all.js"></script>

        <!-- OpenLayers resources -->
        <link rel="stylesheet" type="text/css" href="externals/openlayers/theme/default/style.css" />
        <script type="text/javascript" src="script/OpenLayers.js"></script>

        <!-- GeoExt resources -->
        <link rel="stylesheet" type="text/css" href="externals/geoext/resources/css/popup.css" />
        <link rel="stylesheet" type="text/css" href="externals/geoext/resources/css/layerlegend.css" />
        <link rel="stylesheet" type="text/css" href="externals/geoext/resources/css/gxtheme-gray.css" />
        <script type="text/javascript" src="script/GeoExt.js"></script> 

        <!-- gxp resources -->
        <link rel="stylesheet" type="text/css" href="externals/gxp/src/theme/all.css" />
        <script type="text/javascript" src="script/gxp.js"></script> 
        
        <!-- ux resources -->
        <script type="text/javascript" src="script/ux.js"></script>
        
        <!-- proj4js resources -->
        <!--
        <script type="text/javascript" src="externals/proj4js/lib/proj4js-compressed.js"></script>
        -->

        <!-- app resources -->
        <link rel="stylesheet" type="text/css" href="theme/app/style.css" />
        <!--[if IE]><link rel="stylesheet" type="text/css" href="theme/app/ie.css"/><![endif]-->        

        <script type="text/javascript">

            Ext.QuickTips.init();
            Ext.BLANK_IMAGE_URL = "theme/app/img/blank.gif";
            OpenLayers.DOTS_PER_INCH = 25.4 / 0.28;
            OpenLayers.ImgPath = "externals/openlayers/img/";
            OpenLayers.ProxyHost = "proxy/?url=";
            OpenLayers.Layer.WMS.prototype.DEFAULT_PARAMS.transparent = true;

            var app = new gxp.Viewer({
                portalConfig: {renderTo: 'portal', border: false, width: 940, height: 400},
                portalItems: [{
                    layout:'hbox',
                    border: false,
                    region: 'center',
                    layoutConfig: {
                        align : 'stretch',
                        pack  : 'start'
                    },
                    items: [
                        {
                            width: 50,
                            bodyCfg: {
                                tag: "div",
                                cls: "legend",
                                html: "<img src='http://sfpark.org/wp-content/uploads/icons/availabilitylegend.png'>"
                            }, 
                            border: false
                        }, {
                            layout: 'vbox', 
                            border: false, 
                            items: [
                                {
                                    layout: "hbox",
                                    layoutConfig: {
                                        align : 'stretch',
                                        pack  : 'start'
                                    },
                                    defaults: {cls: 'search', border: false},
                                    items: [
                                        {
                                            width: 125,
                                            bodyCfg: {tag: 'div', cls: 'findHeader', html: 'Find parking: '}
                                        }, {
                                            flex: 1,
                                            bodyCfg: {tag: 'div'},
                                            id: "tbar"
                                        }
                                    ],
                                    height: 35, 
                                    width: 900, 
                                    border: false
                                }, 
                                "map"
                            ]
                        }
                    ]
               }],
               mapItems: [{
                   xtype: "gx_zoomslider",
                   vertical: true,
                   height: 100
               }],
               sources: {
                   local: {
                       ptype: "gxp_wmssource",
                       url: "/geoserver/ows",
                       title: "Local GeoServer",
                       version: "1.1.1"
                   },
                   google: {
                       ptype: "gxp_googlesource"
                   }
               },
               tools: [
                   {
                       ptype: "gxp_googlegeocoder",
                       outputTarget: "tbar",
                       outputConfig: {
                           hideTrigger: true, 
                           width: 250,
                           emptyText: "Type an address, zip code, or intersection",
                           listEmptyText: "- no matches -"
                       }
                   }
               ],
               map: {
                   id: "map", flex: 1, width: 900,
                   border: false,
                   projection: "EPSG:900913",
                   units: "m",
                   numZoomLevels: 21,
                   maxResolution: 156543.03390625,
                   maxExtent: [
                       -20037508.34, -20037508.34,
                       20037508.34, 20037508.34
                   ],
                   extent: [-13650159, 4534735, -13609227, 4554724],
                   layers: [{
                       source: "google",
                       title: "Road Map",
                       name: "ROADMAP",
                       group: "background",
                       visibility: true
                   }, {
                       source: "google",
                       title: "Hybrid Map",
                       name: "HYBRID",
                       group: "background",
                       visibility: false
                   }, {
                       source: "google",
                       title: "Satellite Map",
                       name: "SATELLITE",
                       group: "background",
                       visibility: false
                   }, {
                       source: "google",
                       title: "Terrain Map",
                       name: "TERRAIN",
                       group: "background",
                       visibility: false
                   }],
                   center: [-13629218, 4545403],
                   zoom: 13
               }
           });

        </script>

    </head>
    <body><div id="portal"></div></body>
</html>
